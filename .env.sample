# =============================================================================
# ClipArchive Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values

# -----------------------------------------------------------------------------
# DATABASE (Required)
# -----------------------------------------------------------------------------
# PostgreSQL connection string - Railway provides this automatically
DATABASE_URL=postgresql://user:password@host:port/database

# -----------------------------------------------------------------------------
# TWITCH API (Required)
# -----------------------------------------------------------------------------
# Create an app at https://dev.twitch.tv/console/apps
# Redirect URL should be: https://your-app.railway.app/auth/callback.php
TWITCH_CLIENT_ID=your_twitch_client_id
TWITCH_CLIENT_SECRET=your_twitch_client_secret

# -----------------------------------------------------------------------------
# APPLICATION (Required)
# -----------------------------------------------------------------------------
# Base URL of your deployed application (no trailing slash)
API_BASE_URL=https://your-app.up.railway.app

# Admin key for bot commands and protected API endpoints
# Generate a secure random string
ADMIN_KEY=your_secure_admin_key_here

# -----------------------------------------------------------------------------
# TWITCH CHAT BOT (Optional - for chat commands)
# -----------------------------------------------------------------------------
# Bot's Twitch username
TWITCH_BOT_USERNAME=your_bot_username

# OAuth token for bot - get from https://twitchapps.com/tmi/
# Include the "oauth:" prefix
TWITCH_OAUTH_TOKEN=oauth:your_oauth_token_here

# Comma-separated list of initial channels to join
# Bot will also auto-join channels from bot_channels table
TWITCH_CHANNEL=channel1,channel2,channel3

# =============================================================================
# NOTES
# =============================================================================
#
# Authentication Flow:
# - Users log in via Twitch OAuth at /auth/login.php
# - Super admins (hardcoded in twitch_oauth.php) have full access
# - Streamers have full access to their own channel
# - Moderators have access based on permissions granted by streamer
#
# Bot Commands:
# - All commands use the ADMIN_KEY for authentication
# - Bot auto-syncs channel list from database every 60 seconds
# - Per-channel command settings stored in channel_settings table
#
# Clip Archival:
# - clips_backfill.php fetches clips from Twitch API
# - Uses 30-day windows to bypass 1000-clip API limit
# - migrate_clips_to_db.php imports clips to PostgreSQL
# - refresh_clips.php for incremental updates
#
# MP4 Streaming:
# - Uses Twitch's internal GQL API (gql.twitch.tv/gql)
# - Works for any clip, even from deleted VODs
# - No additional API keys required
#
